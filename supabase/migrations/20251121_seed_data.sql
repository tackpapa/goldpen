-- =====================================================
-- GoldPen Seed Data
-- Created: 2025-11-21
-- Purpose: Insert sample data based on mock data structures
-- =====================================================

-- NOTE: This script assumes you have:
-- 1. An organization (will create if not exists)
-- 2. Some students, teachers, and classes
-- Update the UUIDs below to match your actual data

-- =====================================================
-- HELPER: Create demo organization if not exists
-- =====================================================

DO $$
DECLARE
  demo_org_id UUID := '00000000-0000-0000-0000-000000000001';
BEGIN
  INSERT INTO organizations (id, name, subdomain, created_at, updated_at)
  VALUES (
    demo_org_id,
    'Demo Academy',
    'demo',
    NOW(),
    NOW()
  )
  ON CONFLICT (id) DO NOTHING;
END $$;

-- =====================================================
-- 1. EXPENSE CATEGORIES
-- =====================================================

INSERT INTO expense_categories (id, org_id, name, description, color) VALUES
('10000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', '교재비', '수업 교재 및 학습 자료', '#3B82F6'),
('10000000-0000-0000-0000-000000000002', '00000000-0000-0000-0000-000000000001', '간식비', '학생 간식 및 음료', '#10B981'),
('10000000-0000-0000-0000-000000000003', '00000000-0000-0000-0000-000000000001', '관리비', '시설 관리 및 유지비', '#F59E0B'),
('10000000-0000-0000-0000-000000000004', '00000000-0000-0000-0000-000000000001', '인건비', '강사 급여 및 수당', '#EF4444'),
('10000000-0000-0000-0000-000000000005', '00000000-0000-0000-0000-000000000001', '광고비', '마케팅 및 광고', '#8B5CF6')
ON CONFLICT (id) DO NOTHING;

-- =====================================================
-- 2. EXPENSES
-- =====================================================

INSERT INTO expenses (org_id, category_id, amount, expense_date, description, notes) VALUES
('00000000-0000-0000-0000-000000000001', '10000000-0000-0000-0000-000000000001', 15000000, '2025-06-01', '수학 문제집 50권', '중등 수학 교재'),
('00000000-0000-0000-0000-000000000001', '10000000-0000-0000-0000-000000000002', 5000000, '2025-06-05', '학생 간식 (6월)', '과자, 음료수'),
('00000000-0000-0000-0000-000000000001', '10000000-0000-0000-0000-000000000003', 20000000, '2025-06-10', '에어컨 수리', '2층 강의실'),
('00000000-0000-0000-0000-000000000001', '10000000-0000-0000-0000-000000000004', 300000000, '2025-06-15', '6월 강사 급여', '정규 강사 5명'),
('00000000-0000-0000-0000-000000000001', '10000000-0000-0000-0000-000000000005', 10000000, '2025-06-18', '네이버 블로그 광고', '6월 광고비');

-- =====================================================
-- 3. BILLING TRANSACTIONS
-- =====================================================

-- Note: Update student_id and enrollment_id to match your actual data
INSERT INTO billing_transactions (org_id, amount, payment_method, payment_date, description) VALUES
('00000000-0000-0000-0000-000000000001', 50000000, 'card', '2025-06-01', '6월 수업료 - 김민준'),
('00000000-0000-0000-0000-000000000001', 50000000, 'bank_transfer', '2025-06-02', '6월 수업료 - 이서윤'),
('00000000-0000-0000-0000-000000000001', 50000000, 'cash', '2025-06-03', '6월 수업료 - 박지호'),
('00000000-0000-0000-0000-000000000001', 60000000, 'card', '2025-06-04', '6월 수업료 + 특강 - 최서연'),
('00000000-0000-0000-0000-000000000001', 50000000, 'mobile', '2025-06-05', '6월 수업료 - 정도윤'),
('00000000-0000-0000-0000-000000000001', 30000000, 'card', '2025-06-10', '여름특강 등록 - 강하은'),
('00000000-0000-0000-0000-000000000001', 50000000, 'bank_transfer', '2025-06-12', '6월 수업료 - 윤서준');

-- =====================================================
-- 4. HOMEWORK ASSIGNMENTS
-- =====================================================

-- Note: Update class_id and teacher_id to match your actual data
-- Using placeholder IDs - replace with actual class/teacher IDs

-- INSERT INTO homework_assignments (org_id, class_id, title, description, subject, assigned_date, due_date) VALUES
-- ('00000000-0000-0000-0000-000000000001', 'YOUR_CLASS_ID', '이차방정식 문제 풀이', '교과서 p.45-52 모든 문제', '수학', '2025-06-17', '2025-06-24'),
-- ('00000000-0000-0000-0000-000000000001', 'YOUR_CLASS_ID', '영문법 연습문제', '현재완료 시제 20문제', '영어', '2025-06-17', '2025-06-22'),
-- ('00000000-0000-0000-0000-000000000001', 'YOUR_CLASS_ID', '한국사 요약정리', '조선시대 주요 사건', '한국사', '2025-06-18', '2025-06-25');

-- =====================================================
-- 5. EXAMS
-- =====================================================

-- INSERT INTO exams (org_id, class_id, title, subject, exam_date, duration_minutes, total_score) VALUES
-- ('00000000-0000-0000-0000-000000000001', 'YOUR_CLASS_ID', '중간고사 수학', '수학', '2025-06-20', 60, 100),
-- ('00000000-0000-0000-0000-000000000001', 'YOUR_CLASS_ID', '영어 단어 시험', '영어', '2025-06-21', 30, 50),
-- ('00000000-0000-0000-0000-000000000001', 'YOUR_CLASS_ID', '과학 실험 평가', '과학', '2025-06-22', 45, 100);

-- =====================================================
-- 6. LESSONS
-- =====================================================

-- INSERT INTO lessons (org_id, class_id, lesson_date, title, content, homework_assigned) VALUES
-- ('00000000-0000-0000-0000-000000000001', 'YOUR_CLASS_ID', '2025-06-17', '이차방정식 심화', '이차방정식의 실근과 허근 개념 학습', '교과서 p.45-52'),
-- ('00000000-0000-0000-0000-000000000001', 'YOUR_CLASS_ID', '2025-06-18', '현재완료 시제', '현재완료의 용법과 예문 학습', '워크북 p.30-35'),
-- ('00000000-0000-0000-0000-000000000001', 'YOUR_CLASS_ID', '2025-06-19', '조선시대 역사', '임진왜란과 병자호란 배경 학습', '한국사 노트 정리');

-- =====================================================
-- 7. ATTENDANCE RECORDS
-- =====================================================

-- INSERT INTO attendance_records (org_id, student_id, class_id, attendance_date, status, is_one_on_one) VALUES
-- ('00000000-0000-0000-0000-000000000001', 'YOUR_STUDENT_ID', 'YOUR_CLASS_ID', '2025-06-17', 'present', false),
-- ('00000000-0000-0000-0000-000000000001', 'YOUR_STUDENT_ID', 'YOUR_CLASS_ID', '2025-06-18', 'late', false),
-- ('00000000-0000-0000-0000-000000000001', 'YOUR_STUDENT_ID', 'YOUR_CLASS_ID', '2025-06-19', 'absent', false);

-- =====================================================
-- 8. CONSULTATIONS
-- =====================================================

INSERT INTO consultations (org_id, student_name, student_grade, parent_name, parent_phone, parent_email, goals, preferred_times, status, scheduled_date) VALUES
('00000000-0000-0000-0000-000000000001', '김철수', 10, '김학부모', '010-1234-5678', 'parent1@example.com', '수학 성적 향상', '평일 오후 2-4시', 'scheduled', '2025-06-20 14:00:00+00'),
('00000000-0000-0000-0000-000000000001', '이영희', 9, '이부모님', '010-2345-6789', 'parent2@example.com', '영어 회화 실력 향상', '주말 오전', 'new', NULL),
('00000000-0000-0000-0000-000000000001', '박민수', 11, '박어머니', '010-3456-7890', 'parent3@example.com', '대입 준비 상담', '평일 오후', 'completed', '2025-06-15 15:00:00+00'),
('00000000-0000-0000-0000-000000000001', '최지원', 8, '최아버지', '010-4567-8901', 'parent4@example.com', '중등 수학 선행', '평일 저녁', 'waitlist', NULL),
('00000000-0000-0000-0000-000000000001', '정수아', 10, '정엄마', '010-5678-9012', 'parent5@example.com', '과학 특강', '주말', 'enrolled', NULL);

-- =====================================================
-- 9. SEATS (독서실)
-- =====================================================

INSERT INTO seats (org_id, seat_number, seat_type, status) VALUES
('00000000-0000-0000-0000-000000000001', 1, 'premium', 'vacant'),
('00000000-0000-0000-0000-000000000001', 2, 'regular', 'vacant'),
('00000000-0000-0000-0000-000000000001', 3, 'regular', 'vacant'),
('00000000-0000-0000-0000-000000000001', 4, 'quiet', 'vacant'),
('00000000-0000-0000-0000-000000000001', 5, 'regular', 'vacant'),
('00000000-0000-0000-0000-000000000001', 6, 'premium', 'vacant'),
('00000000-0000-0000-0000-000000000001', 7, 'regular', 'vacant'),
('00000000-0000-0000-0000-000000000001', 8, 'quiet', 'vacant'),
('00000000-0000-0000-0000-000000000001', 9, 'regular', 'vacant'),
('00000000-0000-0000-0000-000000000001', 10, 'premium', 'vacant'),
('00000000-0000-0000-0000-000000000001', 11, 'regular', 'vacant'),
('00000000-0000-0000-0000-000000000001', 12, 'regular', 'vacant'),
('00000000-0000-0000-0000-000000000001', 13, 'quiet', 'vacant'),
('00000000-0000-0000-0000-000000000001', 14, 'regular', 'vacant'),
('00000000-0000-0000-0000-000000000001', 15, 'premium', 'vacant'),
('00000000-0000-0000-0000-000000000001', 16, 'regular', 'vacant'),
('00000000-0000-0000-0000-000000000001', 17, 'regular', 'vacant'),
('00000000-0000-0000-0000-000000000001', 18, 'quiet', 'vacant'),
('00000000-0000-0000-0000-000000000001', 19, 'regular', 'vacant'),
('00000000-0000-0000-0000-000000000001', 20, 'premium', 'vacant')
ON CONFLICT (org_id, seat_number) DO NOTHING;

-- =====================================================
-- SEED DATA COMPLETE
-- =====================================================
-- Financial data: 5 expense categories, 5 expenses, 7 billing transactions
-- Academic data: Ready for homework/exams/lessons (commented out - need actual IDs)
-- Consultations: 5 sample consultations
-- Seats: 20 seats configured
-- =====================================================

-- =====================================================
-- NEXT STEPS
-- =====================================================
-- 1. Run this migration: supabase migration up
-- 2. Check Supabase dashboard to get actual student/class/teacher IDs
-- 3. Uncomment and update the homework/exams/lessons/attendance sections
-- 4. Run a second migration with the updated data
-- =====================================================
